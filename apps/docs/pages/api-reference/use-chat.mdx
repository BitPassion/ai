---
title: useChat
---

# `useChat(options: UseChatOptions): ChatHelpers` [#usechat]

useChat is an SWR-powered React hook that allows you to easily create a conversational user interface for your chatbot application. It enables streaming of chat messages from your AI provider and manages the state for chat input.

Below is a usage example demonstrating a basic chat interface:

```tsx filename="app/chat.tsx"
'use client'

import { useChat } from 'ai-connector'

export default function Chat() {
  const { messages, input, handleInputChange, handleSubmit } = useChat()

  return (
    <div className="mx-auto w-full max-w-md py-24 flex flex-col stretch">
      {messages.length > 0
        ? messages.map(m => (
            <div key={m.id}>
              {m.role === 'user' ? 'User: ' : 'AI: '}
              {m.content}
            </div>
          ))
        : null}

      <form onSubmit={handleSubmit}>
        <input
          className="fixed w-full max-w-md bottom-0 border border-gray-300 rounded mb-8 shadow-xl p-2"
          value={input}
          placeholder="Say something..."
          onChange={handleInputChange}
        />
      </form>
    </div>
  )
}
```

### `UseChatOptions`

- **`api?: string = '/api/chat'`** - The API endpoint that accepts a `{ messages: Message[] }` object and returns a stream of tokens of the AI chat response. Defaults to `/api/chat`.
- **`id?: string`** - An unique identifier for the chat. If not provided, a random one will be generated. When provided, the `useChat` hook with the same `id` will have shared states across components thanks to SWR.
- **`initialInput?: string = ''`** - An optional string of initial prompt input
- **`initialMessages?: Messages[] = []`** - An optional array of initial chat messages
- **`onResponse?: (res: Response) => void`** - An optional callback that will be called with the response from the API endpoint. Useful for throwing customized errors or logging
- **`onFinish?: (message: Message) => void`** - An optional callback that will be called when the chat stream ends
- **`headers?: Record<string, string> | Headers`** - An optional object of headers to be passed to the API endpoint
- **`body?: any`** - An optional, extra body object to be passed to the API endpoint

### `ChatHelpers`

The `useChat` hook returns an object containing several helper methods and variables to manage the chat state:

- **`messages: Message[]`** - The current array of chat messages.
- **`error: any`** - An error object returned by SWR, if any.
- **`append: (message: Message | CreateMessage) => void`** - Function to append a message to the chat, triggering an API call for the AI response.
- **`reload: () => void`** - Function to reload the last AI chat response for the current chat history. If the last message isn't from the assistant, this method does nothing.
- **`stop: () => void`** - Function to abort the current API request.
- **`set: (messages: Message[]) => void`** - Function to locally update the `messages` state.
- **`input: string`** - The current value of the input field.
- **`setInput: React.Dispatch<React.SetStateAction<string>>`** - Function to update the `input` value.
- **`handleInputChange: (e: any) => void`** - Handler for the `onChange` event of the input field to control the input's value.
- **`handleSubmit: (e: React.FormEvent<HTMLFormElement>) => void`** - Form submission handler that automatically resets the input field and appends a user message.
- **`isLoading: boolean`** - Boolean flag indicating whether an SWR fetch operation is currently in progress.
